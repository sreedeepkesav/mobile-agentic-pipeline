{
  "skill_name": "ios-full-pipeline",
  "evals": [
    {
      "id": "ios-full-bootstrap",
      "prompt": "I have a new iOS project for a personal finance tracker. Set up the development pipeline.",
      "expected_output": "Bootstrap runs: asks about project context, discovers MCPs, detects new project (scaffold on), configures stages. Creates .pipeline.yml with personal context defaults.",
      "expectations": [
        "Runs Bootstrap Agent with all 5 steps",
        "Asks 'what's the context for this project?' on first run",
        "Detects no existing Swift source → scaffold activated",
        "Sets product_agent to 'always' for personal/solo context",
        "Creates .pipeline.yml with appropriate defaults",
        "Does NOT start coding — only configures pipeline"
      ]
    },
    {
      "id": "ios-full-new-feature",
      "prompt": "Add a user profile screen with avatar, name, email, and settings link. Include API integration.",
      "expected_output": "Routes as New Feature. Product Agent decomposes → Review Gate → Code Gen (all 4 phases) → Test + Lint → Build → Git PR.",
      "expectations": [
        "Coordinator classifies as 'New Feature'",
        "Product Agent produces spec.md with screens, API contracts, edge cases",
        "Pauses at Review Gate for approval before coding",
        "Code Gen runs all 4 phases: Architect → Domain → Data ‖ Presentation → Integration",
        "Domain layer has zero UIKit/SwiftUI imports",
        "Test and Lint run in parallel after Code Gen",
        "Git creates branch and PR, does NOT merge"
      ]
    },
    {
      "id": "ios-full-bug-fix",
      "prompt": "Fix the crash in the login screen when the user taps 'Forgot Password' with no internet.",
      "expected_output": "Routes as Bug Fix. Skips Product Agent, Scaffold, Build, Deploy. Goes directly to Code Gen (targeted lead) → Test + Lint → Git.",
      "expectations": [
        "Coordinator classifies as 'Bug Fix'",
        "Skips Product Agent entirely",
        "Code Gen targets the specific layer (likely Presentation Lead for UI crash)",
        "Does NOT run full 4-phase Code Gen — only affected lead",
        "Test and Lint verify the fix",
        "Skips Build and Deploy stages",
        "Git commits with 'fix:' conventional commit prefix"
      ]
    },
    {
      "id": "ios-full-sprint-batch",
      "prompt": "Here are 4 tickets for this sprint: add dark mode toggle, fix settings crash, add notification preferences, refactor the networking layer.",
      "expected_output": "Routes as Sprint Batch. Product Agent builds task DAG. Independent tasks run in parallel Code Gen teams.",
      "expectations": [
        "Coordinator classifies as 'Sprint Batch'",
        "Product Agent builds task graph (DAG) with dependencies",
        "Identifies independent tasks that can run in parallel",
        "Each task gets its own Code Gen team",
        "Per-task Test + Lint after each Code Gen completes",
        "Each task gets its own branch and PR",
        "Dependent tasks wait for upstream completion"
      ]
    },
    {
      "id": "ios-full-memory-learning",
      "prompt": "Add a settings page with user preferences stored in UserDefaults.",
      "expected_output": "Pipeline Memory is consulted before coding. Agents read past patterns and apply them. New learnings are written back.",
      "expectations": [
        "Architect reads Pipeline Memory before planning",
        "Data Lead reads memory for persistence patterns",
        "Presentation Lead reads memory for ViewModel conventions",
        "Code follows established patterns from memory",
        "New decisions and patterns are written back to memory",
        "Memory queried for relevant context (e.g., 'UserDefaults patterns')"
      ]
    }
  ]
}
